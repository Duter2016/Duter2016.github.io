---
layout:     post
title:      Git Push时如何避免重复输入密码
subtitle:   也可以使git-cola不重复输入密码
date:       2021-01-23
author:     Duter2016
header-img: img/post-bg-debug.png
catalog: true
music-id: 
music-idfull: 
tags:
    - Git
---

在使用 git 时，至少有四种方法可以避免重复输入密码。第一个解决方案需要使用 KDE 钱包，第二个解决方案不需要额外的工具，第三个和第四个不是最安全的。

## 第一种方式-使用 KDE 钱包

在 KDE 钱包中存储密码，你需要安装 ksshaskpass 包(限kde桌面环境):

```
$ sudo apt-get install ksshaskpass
```

然后配置 git 来使用它:
```
$ git config --global core.askpass /usr/bin/ksshaskpass
```

或者你可以使用 GIT_ASKPASS 环境变量:
```
$ export GIT_ASKPASS=`which ksshaskpass`
```

## 第二种方法——在内存中临时存储密码

> 该方法对git-cola有效果！

您可以使用凭证帮助器`credential.helper`在内存中临时存储密码:
```
$ git config --global credential.helper 'cache'
```
默认情况下，凭据存储15分钟，以更改秒数来缓存凭据，使用超时参数(本例中为60分钟) :
```
$ git config --global credential.helper 'cache --timeout=3600'
```
如果需要取消设置缓存，执行：

```
$ git config --unset --global credential.helper 'cache'
$ git config --unset --global credential.helper 'cache --timeout=3600'
```
```

在超时执行命令之前，先清除凭据缓存:
```
$ git credential-cache exit
```

检查使用手册页:
```
$ man git-credential-cache
$ man gitcredentials
```
## 第三种方式-使用 ~/. netrc 文件

您还可以在 ~/. netrc 文件中使用纯文本存储凭据(每个主机) :
```
machine hostname login USERNAME password PASSWORD
```

确保其他人无法读取文件:
```
$ chmod 0600 ~/.netrc
```

## 第四种方式-创建文件存储GIT用户名和密码

在根目录用touch创建文件 `.git-credentials`：

```
touch ~/.git-credentials
```

进入终端， 输入如下命令：
```
git config --global credential.helper store
```

执行完后查看根目录下的.gitconfig文件，会多了一项：

[credential]

    helper = store
重新开启git会发现git push时不用再输入用户名和密码。此方法，不安全，为明文密码。

## 总结

由于我使用的mate桌面，第一种方法不方便使用，第三种和第四种不安全，所以我使用第二种方法，并且第二种方法对Git-cola是有效的。
