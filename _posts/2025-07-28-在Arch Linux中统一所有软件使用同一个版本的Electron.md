---
layout:     post
title:      åœ¨Arch Linuxä¸­ç»Ÿä¸€æ‰€æœ‰è½¯ä»¶ä½¿ç”¨åŒä¸€ä¸ªç‰ˆæœ¬çš„Electron
subtitle:   ç³»ç»Ÿä¸­åªä¿ç•™ä¸€ä¸ªç‰ˆæœ¬çš„electron
date:       2025-07-28
author:     Duter2016
header-img: img/post-bg-debug.png
catalog: true
music-id: 
music-idfull: 
tags:
    - Linux
---


åœ¨ Arch Linux ä¸­ï¼Œå¤šä¸ªåº”ç”¨ç¨‹åºå¯èƒ½ä¼šä¾èµ–ä¸åŒç‰ˆæœ¬çš„ `electron`ï¼Œå¯¼è‡´ç³»ç»Ÿä¸­å®‰è£…äº†å¤šä¸ªç‰ˆæœ¬çš„ `electron`ï¼ˆå¦‚ `electron28`ã€`electron29` ç­‰ï¼‰ã€‚æœ¬æ–‡ä½¿ç”¨çš„**ç»Ÿä¸€æ‰€æœ‰è½¯ä»¶ä½¿ç”¨åŒä¸€ä¸ªç‰ˆæœ¬çš„ Electron** çš„æ–¹æ³•æ˜¯ï¼š**åœ¨ Arch Linux ä¸­ï¼Œä¿®æ”¹å·²å®‰è£…è½¯ä»¶çš„ä¾èµ–å…³ç³»**ã€‚

è¯¥æ–¹æ³•é€šå¸¸éœ€è¦ **æ‰‹åŠ¨ä¿®æ”¹ `PKGBUILD` å¹¶é‡æ–°æ„å»ºå®‰è£…**ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†çš„æ–¹æ³•ï¼š

---

### **ä¸€ã€å‡†å¤‡å·¥ä½œ**
1. **æ‰¾åˆ°ç³»ç»Ÿä¸­å®‰è£…çš„æ‰€æœ‰ Electron ç‰ˆæœ¬**ï¼š
   ```bash
   ls /usr/lib/electron*  # é€šå¸¸ä½äº /usr/lib/electronXX
   ```
   ```bash
   pacman -Ql electron35  # æ£€æŸ¥ä¸Šä¸€æ­¥å·²ç»æŸ¥æ‰¾åˆ°çš„å·²å®‰è£…ç‰ˆæœ¬çš„å…·ä½“å®‰è£…è·¯å¾„ï¼Œå¦‚35
   ```

2. **é€‰æ‹©ä½ æƒ³ä½¿ç”¨çš„ç‰ˆæœ¬**ï¼ˆå¦‚ `electron35`ï¼‰ï¼š
   
   ä¸‹é¢æˆ‘ä»¬çš„æ“ä½œä»¥`electron35`ä¸ºä¾‹è¿›è¡Œæ“ä½œã€‚

### **äºŒã€ä¿®æ”¹ `PKGBUILD` å¹¶é‡æ–°æ„å»ºï¼ˆæ¨èï¼‰**

1. **è·å–è½¯ä»¶çš„ `PKGBUILD`**

   åˆ‡æ¢åˆ° /tmp ä¸´æ—¶æ„å»ºï¼ˆé¿å…æƒé™é—®é¢˜ï¼‰

```bash
   cd /tmp
   ```

   ```bash
   # å¯¹äº AUR è½¯ä»¶
   yay -G è½¯ä»¶å
   cd è½¯ä»¶å
   ```

   ```bash
   # å¯¹äºå®˜æ–¹ä»“åº“è½¯ä»¶
   asp export è½¯ä»¶å
   cd è½¯ä»¶å
   ```



2. **ç¼–è¾‘ `PKGBUILD`ï¼Œä¿®æ”¹ `depends` æ•°ç»„**
   ```bash
   nano PKGBUILD
   ```
   ```bash
   depends=('ä¾èµ–1' 'ä¾èµ–2' ...)  # ä¿®æ”¹æˆä½ æƒ³è¦çš„ä¾èµ–
   ```

3. **é‡æ–°æ„å»ºå®‰è£…**
   ```bash
   makepkg -si
   ```
   > **âš ï¸ æ³¨æ„**ï¼šå¦‚æœä¾èµ–å…³ç³»å˜åŒ–è¿‡å¤§ï¼Œå¯èƒ½éœ€è¦æ‰‹åŠ¨ `pacman -Rsn` æ—§ç‰ˆæœ¬åå†å®‰è£…ã€‚

3. **ä¿®æ”¹ `.desktop` æ–‡ä»¶**ï¼ˆå¯é€‰ï¼‰ï¼š

   - æœ‰äº›åº”ç”¨ç¨‹åºï¼ˆå¦‚ VSCodeã€Discordï¼‰å¯èƒ½ä¼šåœ¨æ¡Œé¢å¿«æ·æ–¹å¼ (`/usr/share/applications/`) ä¸­ç›´æ¥æŒ‡å®š Electron è·¯å¾„ï¼Œæˆ‘ä»¬è¿™é‡Œä»¥é‡æ–°æŒ‡å®šåˆ° Electron35 è·¯å¾„ä¸ºä¾‹ï¼š

     ```bash
     sudo sed -i 's|/usr/lib/electron[0-9]*|/usr/lib/electron35|g' /usr/share/applications/*.desktop
     ```

     ```bash
     sudo sed -i 's|/usr/lib/electron[0-9]*|/usr/lib/electron35|g' /home/dh/.local/share/applications/*.desktop
     ```
---

### **ä¸‰ã€éªŒè¯æ˜¯å¦ç”Ÿæ•ˆ**

è¿è¡Œï¼š

```bash
ldd $(which è½¯ä»¶å) | grep electron  # æ£€æŸ¥ æŸä¸ªè½¯ä»¶ ä½¿ç”¨çš„ Electron

```
å¦‚æœè¾“å‡ºå‡æŒ‡å‘ `/usr/lib/electron35`ï¼Œè¯´æ˜æˆåŠŸç»Ÿä¸€ç‰ˆæœ¬ï¼

æœ€ååˆ é™¤ä½ ä¸å†éœ€è¦çš„ç‰ˆæœ¬çš„electronå°±å¯ä»¥äº†ï¼š

```bash
yay -Rs electron34

```

å¦‚æœæ˜¯å…³é”®ç³»ç»Ÿè½¯ä»¶ï¼ˆå¦‚ `glibc`, `systemd`ï¼‰ï¼Œå»ºè®®ä¸è¦æ‰‹åŠ¨ä¿®æ”¹ä¾èµ–ï¼Œä»¥å…ç³»ç»Ÿå´©æºƒï¼ ğŸ”§